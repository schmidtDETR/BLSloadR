<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generic BLS Dataset Download — load_bls_dataset • BLSloadR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generic BLS Dataset Download — load_bls_dataset"><meta name="description" content="This function generalizes a method to download all BLS data for a given time series database.
These files are accessed from https://download.bls.gov/pub/time.series/ and several datasets
are available. A summary of an identified database can be generated using the `bls_overiew()`
function. When multiple potential data files exist (common in large data sets), the function
will prompt for an input of which file to use."><meta property="og:description" content="This function generalizes a method to download all BLS data for a given time series database.
These files are accessed from https://download.bls.gov/pub/time.series/ and several datasets
are available. A summary of an identified database can be generated using the `bls_overiew()`
function. When multiple potential data files exist (common in large data sets), the function
will prompt for an input of which file to use."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BLSloadR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/BLSloadR-intro.html">Introduction to BLSloadR</a></li>
    <li><a class="dropdown-item" href="../articles/using_get_laus.html">Working with LAUS Data</a></li>
    <li><a class="dropdown-item" href="../articles/using_get_oews.html">Working with OEWS Data</a></li>
    <li><a class="dropdown-item" href="../articles/working_with_ces_data.html">Working with CES Data: Enhanced Features and Performance</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generic BLS Dataset Download</h1>

      <div class="d-none name"><code>load_bls_dataset.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function generalizes a method to download all BLS data for a given time series database.
These files are accessed from https://download.bls.gov/pub/time.series/ and several datasets
are available. A summary of an identified database can be generated using the `bls_overiew()`
function. When multiple potential data files exist (common in large data sets), the function
will prompt for an input of which file to use.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">load_bls_dataset</span><span class="op">(</span></span>
<span>  <span class="va">database_code</span>,</span>
<span>  return_full <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  simplify_table <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  suppress_warnings <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  which_data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cache <span class="op">=</span> <span class="fu"><a href="check_bls_cache_env.html">check_bls_cache_env</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-database-code">database_code<a class="anchor" aria-label="anchor" href="#arg-database-code"></a></dt>
<dd><p>This is the two digit character identifier for the desired database.
Some Valid options are:</p><ul><li><p>"ce" - National Current Employment Statistics Data</p></li>
<li><p>"sm" - State and Metro area Current Employment Statistics Data</p></li>
<li><p>"mp" - Major Sector Total Factor Productivity</p></li>
<li><p>"ci" - Employment Cost Index</p></li>
<li><p>"eb" - Employee Benefits Survey</p></li>
</ul></dd>


<dt id="arg-return-full">return_full<a class="anchor" aria-label="anchor" href="#arg-return-full"></a></dt>
<dd><p>This argument defaults to FALSE. If set to TRUE it will return
a list of the elements of data retrieved from the BLS separating the data, series, and
mapping values downloaded.</p></dd>


<dt id="arg-simplify-table">simplify_table<a class="anchor" aria-label="anchor" href="#arg-simplify-table"></a></dt>
<dd><p>This parameter defaults to TRUE. When TRUE it will remove all
columns from the date with "_code" in the column name, as well as a series of internal
identifiers which provide general information about the series but which are not needed for
performing time series analysis. This parameter also converts the column "value" to numeric
and generates a date column from the year and period columns in the data.</p></dd>


<dt id="arg-suppress-warnings">suppress_warnings<a class="anchor" aria-label="anchor" href="#arg-suppress-warnings"></a></dt>
<dd><p>Logical. If TRUE, suppress individual download warnings during processing.</p></dd>


<dt id="arg-which-data">which_data<a class="anchor" aria-label="anchor" href="#arg-which-data"></a></dt>
<dd><p>Character string or NULL. Defaults to NULL.</p><ul><li><p>"all" - Automatically selects the data file containing ".1.All" (e.g., "bd.data.1.AllItems" or "le.data.1.AllData").</p></li>
<li><p>"current" - Automatically selects the data file containing "Current" (e.g., "ce.data.0.Current").</p></li>
<li><p>NULL - Default behavior. Prompts the user to select a file if multiple exist, or selects the single available file.</p></li>
</ul><p>If the requested pattern is not found, the function falls back to the default behavior, prompting the user to select a file.</p></dd>


<dt id="arg-cache">cache<a class="anchor" aria-label="anchor" href="#arg-cache"></a></dt>
<dd><p>Logical.  Uses USE_BLS_CACHE environment variable, or defaults to FALSE. If TRUE, will download a cached file from BLS server and update cache if BLS server indicates an updated file.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>This function will return either a bls_data_collection object (if return_full is FALSE or not provided)
 or a named list of the returned data including the bls_data_collection object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Import All Data</span></span></span>
<span class="r-in"><span><span class="va">fm_import</span> <span class="op">&lt;-</span> <span class="fu">load_bls_dataset</span><span class="op">(</span><span class="st">"fm"</span>, which_data <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading series file:fm.series</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Auto-selected 'all' file: fm.data.1.AllData</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No aspect files found in the BLS database directory.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.data.1.AllData...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.series...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.chld...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.fchld...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.fdat...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.fhlf...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.fnmatwk...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.fnme...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.fnmlf...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.fnmu...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.fnmws...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.forig...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.frace...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.ftpt...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.ftyp...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.hhlf...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.lfst...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.mari...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.misclf...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.mwlf...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.orig...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.prlf...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.race...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.seasonal...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.sexs...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.tdat...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloadingfm.wkst...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining data to series file...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.chld on column: chld_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.fchld on column: fchld_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.fdat on column: fdat_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.fhlf on column: fhlf_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.fnmatwk on column: fnmatwk_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.fnme on column: fnme_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.fnmlf on column: fnmlf_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.fnmu on column: fnmu_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.fnmws on column: fnmws_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.forig on column: forig_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.frace on column: frace_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.ftpt on column: ftpt_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.ftyp on column: ftyp_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.hhlf on column: hhlf_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.lfst on column: lfst_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.mari on column: mari_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.misclf on column: misclf_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.mwlf on column: mwlf_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.orig on column: orig_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.prlf on column: prlf_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.race on column: race_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Skipping mapping file fm.seasonal - join column 'seasonal_code' not found in data</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.sexs on column: sexs_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.tdat on column: tdat_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining mapping file fm.wkst on column: wkst_code</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Simplifying table structure...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Download completed successfully with no issues detected.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get $data element</span></span></span>
<span class="r-in"><span><span class="va">fm_data</span> <span class="op">&lt;-</span> <span class="va">fm_import</span><span class="op">$</span><span class="va">data</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Filter to a Series</span></span></span>
<span class="r-in"><span><span class="co"># Families with Children Under 6 and No Employed Parent</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">u6_no_emp</span> <span class="op">&lt;-</span> <span class="va">fm_data</span> <span class="op">|&gt;</span> </span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">series_title</span> <span class="op">==</span> <span class="st">"Total families with children under 6 - with no parent employed"</span><span class="op">)</span> <span class="op">|&gt;</span> </span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">value</span>, <span class="va">fchld_text</span>, <span class="va">fhlf_text</span>, <span class="va">tdat_text</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">u6_no_emp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      year value                fchld_text          fhlf_text</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;char&gt; &lt;num&gt;                    &lt;char&gt;             &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:   2009  2007 With own children under 6 Unemployed or NILF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:   2010  2103 With own children under 6 Unemployed or NILF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:   2011  2105 With own children under 6 Unemployed or NILF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:   2012  1992 With own children under 6 Unemployed or NILF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:   2013  1880 With own children under 6 Unemployed or NILF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:   2014  1807 With own children under 6 Unemployed or NILF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               tdat_text</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: Numbers in thousands</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: Numbers in thousands</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: Numbers in thousands</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: Numbers in thousands</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5: Numbers in thousands</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6: Numbers in thousands</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Examples requiring manual intervention in the console</span></span></span>
<span class="r-in"><span><span class="co"># Download Employer Cost Index Data</span></span></span>
<span class="r-in"><span><span class="va">cost_index</span> <span class="op">&lt;-</span> <span class="fu">load_bls_dataset</span><span class="op">(</span><span class="st">"ci"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Download separated data, series, and mapping columns</span></span></span>
<span class="r-in"><span><span class="va">benefits</span> <span class="op">&lt;-</span> <span class="fu">load_bls_dataset</span><span class="op">(</span><span class="st">"eb"</span>, return_full <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Download data without removing excess columns and value conversions</span></span></span>
<span class="r-in"><span><span class="va">productivity</span> <span class="op">&lt;-</span> <span class="fu">load_bls_dataset</span><span class="op">(</span><span class="st">"mp"</span>, simplify_table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check for download issues</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="has_bls_issues.html">has_bls_issues</a></span><span class="op">(</span><span class="va">cost_index</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="print_bls_warnings.html">print_bls_warnings</a></span><span class="op">(</span><span class="va">cost_index</span>, detailed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Schmidt, Mark Rembert.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

